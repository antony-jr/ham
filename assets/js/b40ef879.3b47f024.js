"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[126],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>c});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=p(n),m=o,c=d["".concat(s,".").concat(m)]||d[m]||h[m]||r;return n?a.createElement(c,i(i({ref:t},u),{},{components:n})):a.createElement(c,i({ref:t},u))}));function c(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:o,i[1]=l;for(var p=2;p<r;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},8829:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var a=n(7462),o=(n(7294),n(3905));const r={slug:"enchilada-los19-guide-relocking",title:"Relocking your Bootloader with LineageOS 19.1 with MindTheGapps on OnePlus 6",authors:["antonyjr"],tags:["enchilada","guide","lineageos19.1","oneplus6"]},i=void 0,l={permalink:"/ham/blog/enchilada-los19-guide-relocking",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2022-12-21-enchilada-guide/index.md",source:"@site/blog/2022-12-21-enchilada-guide/index.md",title:"Relocking your Bootloader with LineageOS 19.1 with MindTheGapps on OnePlus 6",description:"This guide needs the ham tool to build, this guide cannot be used without",date:"2022-12-21T00:00:00.000Z",formattedDate:"December 21, 2022",tags:[{label:"enchilada",permalink:"/ham/blog/tags/enchilada"},{label:"guide",permalink:"/ham/blog/tags/guide"},{label:"lineageos19.1",permalink:"/ham/blog/tags/lineageos-19-1"},{label:"oneplus6",permalink:"/ham/blog/tags/oneplus-6"}],readingTime:8.835,hasTruncateMarker:!1,authors:[{name:"Divya Antony J.R",title:"Maintainer of HAM",url:"https://antonyjr.in",imageURL:"https://github.com/antony-jr.png",key:"antonyjr"}],frontMatter:{slug:"enchilada-los19-guide-relocking",title:"Relocking your Bootloader with LineageOS 19.1 with MindTheGapps on OnePlus 6",authors:["antonyjr"],tags:["enchilada","guide","lineageos19.1","oneplus6"]},nextItem:{title:"Welcome to HAM Blogs",permalink:"/ham/blog/welcome"}},s={authorsImageUrls:[void 0]},p=[{value:"Scope of this Guide",id:"scope-of-this-guide",level:2},{value:"Out of Scope",id:"out-of-scope",level:2},{value:"Pre-requisites",id:"pre-requisites",level:2},{value:"Preparing <code>answers.json</code>",id:"preparing-answersjson",level:2},{value:"Get LineageOS 19.1 with MindTheGapps (Self-Signed)",id:"get-lineageos-191-with-mindthegapps-self-signed",level:2},{value:"Download the LineageOS Build from Github Releases",id:"download-the-lineageos-build-from-github-releases",level:2},{value:"Check your Build Before Locking",id:"check-your-build-before-locking",level:2},{value:"Flashing your Public Key and Lock Bootloader",id:"flashing-your-public-key-and-lock-bootloader",level:2},{value:"Conclusion",id:"conclusion",level:2}],u={toc:p};function d(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,a.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"This guide needs the ",(0,o.kt)("a",{parentName:"p",href:"https://antony-jr.github.io/ham/"},"ham tool")," to build, this guide cannot be used without\nthat tool. HAM(Hetzner Android Make) helps you build your own flavor of Android under one Euro using Hetzner Cloud.")),(0,o.kt)("p",null,"The OnePlus 6 (codenamed ",(0,o.kt)("em",{parentName:"p"},'"enchilada"'),") is a flagship smartphone from OnePlus.\nIt was released in May 2018."),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:"right"},"Basic"),(0,o.kt)("th",{parentName:"tr",align:"left"},"Spec Sheet"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"right"},"CPU"),(0,o.kt)("td",{parentName:"tr",align:"left"},"Octa-core (4x2.8 GHz Kryo 385 Gold & 4x1.7 GHz Kryo 385 Silver)")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"right"},"Chipset"),(0,o.kt)("td",{parentName:"tr",align:"left"},"Qualcomm SDM845 Snapdragon 845")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"right"},"GPU"),(0,o.kt)("td",{parentName:"tr",align:"left"},"Adreno 630")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"right"},"Memory"),(0,o.kt)("td",{parentName:"tr",align:"left"},"6/8 GB RAM")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"right"},"Shipped Android Version"),(0,o.kt)("td",{parentName:"tr",align:"left"},"8.1")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"right"},"Storage"),(0,o.kt)("td",{parentName:"tr",align:"left"},"64/128/256 GB")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"right"},"Battery"),(0,o.kt)("td",{parentName:"tr",align:"left"},"Non-removable Li-Po 3300 mAh battery")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"right"},"Display"),(0,o.kt)("td",{parentName:"tr",align:"left"},"Optic AMOLED, 1080 x 2280 pixels, 19:9 ratio (~402 ppi density)")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"right"},"Camera (Back)"),(0,o.kt)("td",{parentName:"tr",align:"left"},'Dual: 16 MP (f/1.7, 27mm, 1/2.6", 1.22\xb5m, gyro-EIS, OIS) + 20 MP (16 MP effective, f/1.7, 1/2.8", 1.0\xb5m), PDAF, dual-LED flash')),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"right"},"Camera (Front)"),(0,o.kt)("td",{parentName:"tr",align:"left"},'16 MP (f/2.0, 25mm, 1/3", 1.0\xb5m), gyro-EIS, Auto HDR, 1080p')))),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://cdn2.gsmarena.com/vv/pics/oneplus/oneplus-6-5.jpg",alt:"OnePlus 6",title:"OnePlus 6"})),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"p"},"This blog post and the entire HAM project was inspired from ",(0,o.kt)("a",{parentName:"strong",href:"https://forum.xda-developers.com/t/guide-re-locking-the-bootloader-on-the-oneplus-6t-with-a-self-signed-build-of-los.4113743/"},"this XDA forum post"),", so credits goes to the\nOP, LineageOS developers and AOSP."))),(0,o.kt)("h2",{id:"scope-of-this-guide"},"Scope of this Guide"),(0,o.kt)("p",null,"Creating an ",(0,o.kt)("em",{parentName:"p"},"unofficial build of LineageOS 19.1")," suitable for using to re-lock the bootloader on a OnePlus 6 and\ntake you through the process of re-locking your bootloader after installing the above."),(0,o.kt)("h2",{id:"out-of-scope"},"Out of Scope"),(0,o.kt)("p",null,"Remove ",(0,o.kt)("em",{parentName:"p"},"all"),' warning messages during boot (the yellow "Custom OS" message will be present though the orange\n"Unlocked bootloader" message will not), allow you to use official builds of LineageOS 19.1 on your device with a\nre-locked bootloader.'),(0,o.kt)("admonition",{type:"danger"},(0,o.kt)("p",{parentName:"admonition"},"You ",(0,o.kt)("strong",{parentName:"p"},"should not")," flash the official LineageOS build after you have re-locked your phone, you can only build\nunofficial LineageOS builds which are self signed by you, using HAM will make this process very easy. Do not lose\nyour AndroidCerts.zip file which contains your Android Certificates.")),(0,o.kt)("h2",{id:"pre-requisites"},"Pre-requisites"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Basic knowledge of Terminal commands and features in your OS (Windows, Linux or MacOS)"),(0,o.kt)("li",{parentName:"ul"},"A OnePlus 6 Device"),(0,o.kt)("li",{parentName:"ul"},"A PC/Phone which supports you to run ",(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("a",{parentName:"strong",href:"https://antony-jr.github.io/ham/"},"ham tool"))),(0,o.kt)("li",{parentName:"ul"},"Finished ",(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("a",{parentName:"strong",href:"https://antony-jr.github.io/ham/docs/get_started"},"setting up ham")),' with "Getting Started" guide.'),(0,o.kt)("li",{parentName:"ul"},"A working USB cable"),(0,o.kt)("li",{parentName:"ul"},"Fastboot/Adb installed and functional"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"AndroidCerts.zip"),", ",(0,o.kt)("strong",{parentName:"li"},"Github API Key"),", ",(0,o.kt)("strong",{parentName:"li"},"Github Username")," and ",(0,o.kt)("strong",{parentName:"li"},"Github Repo"),' from "Getting Started" ',(0,o.kt)("a",{parentName:"li",href:"https://antony-jr.github.io/ham/docs/get_started"},"guide"))),(0,o.kt)("admonition",{type:"danger"},(0,o.kt)("p",{parentName:"admonition"},"This process may brick your device. Do not proceed unless you are comfortable taking this risk. "),(0,o.kt)("p",{parentName:"admonition"},"This process will delete all data on your phone! Do not proceed unless you have backed up your data!"),(0,o.kt)("p",{parentName:"admonition"},"Make sure you have read through this entire process at least once before attempting, if you are uncomfortable\nwith any steps include in this guide, do not continue.")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},'If you did not read the "Getting Started", please go and\n',(0,o.kt)("a",{parentName:"strong",href:"https://antony-jr.github.io/ham/docs/get_started"},"read that first"),",\nthen come back here.")),(0,o.kt)("h2",{id:"preparing-answersjson"},"Preparing ",(0,o.kt)("inlineCode",{parentName:"h2"},"answers.json")),(0,o.kt)("p",null,"We can pass a json file to HAM instead of answering everything during the prompt, you can ",(0,o.kt)("strong",{parentName:"p"},"also")," write these answers\nduring the prompt itself, that's your choice."),(0,o.kt)("p",null,"This file contains ",(0,o.kt)("strong",{parentName:"p"},"important variables")," that are needed from the user (i.e you), like a Github Repo to Upload the\noutput of the build, a Github API Key to authenticate to upload assets to the given Github repo. A Github Username and\nPath to the AndroidCerts.zip file."),(0,o.kt)("p",null,'From "Getting Started" guide, you should have all these variables, if you already have ',(0,o.kt)("strong",{parentName:"p"},"Android Certificates")," then\nzip all the certificates together, that's your AndroidCerts.zip file."),(0,o.kt)("admonition",{type:"danger"},(0,o.kt)("p",{parentName:"admonition"},"Keep the ",(0,o.kt)("inlineCode",{parentName:"p"},"answers.json")," file safe since that contains a lot of sensitive information, ",(0,o.kt)("inlineCode",{parentName:"p"},"~/.ham.json"),"\nis the ham tool configuration file, this also contains a lot of sensitive information. Make sure that these\nfiles are never shared with anyone.")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"You may delete your ",(0,o.kt)("inlineCode",{parentName:"p"},"answers.json")," after you finish the build successfully, this file is to make life easier\nfor you.")),(0,o.kt)("p",null,"Here is a sample ",(0,o.kt)("inlineCode",{parentName:"p"},"answers.json")," file required for this build,"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n   "github_token": "github_pat_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXx1",\n   "github_user": "yourusername",\n   "github_repo": "yourrepo",\n   "android_certs": "/absolute/path/to/AndroidCerts.zip",\n   "updater_url": ""\n}\n')),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"You can give the ",(0,o.kt)("inlineCode",{parentName:"p"},"updater_url")," a empty string, unless you know what you are doing. During the build, the updater\nstring will be updated to this url.")),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("inlineCode",{parentName:"p"},"android_certs")," must be a file path to the AndroidCerts.zip file. In Windows this might be something like,\n",(0,o.kt)("inlineCode",{parentName:"p"},"C:\\Users\\Desktop\\AndroidCerts.zip")," and so forth. If you are using Android to build, enable termux storage and\ncopy the certificates to your home.")),(0,o.kt)("h2",{id:"get-lineageos-191-with-mindthegapps-self-signed"},"Get LineageOS 19.1 with MindTheGapps (Self-Signed)"),(0,o.kt)("p",null,"You should now have everything ready to start a remote build, start the build by entering the following command\nin your operating system's Terminal. (In Windows, this is Command Prompt or Terminal App, In Android this is Termux and so forth)."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"}," ham get -a answers.json ~@gh/enchilada-los19.1:gapps\n")),(0,o.kt)("p",null,"Once you see the progress bar, and some progress like, ",(0,o.kt)("strong",{parentName:"p"},"Installing Dependencies"),", you may close this program using\n",(0,o.kt)("strong",{parentName:"p"},"Ctrl + C")," or ",(0,o.kt)("strong",{parentName:"p"},"Esc")," or ",(0,o.kt)("strong",{parentName:"p"},"q"),". You may now shutdown your device if you like to.. You can continue tracking the\nbuild or check the status of the build by running the same command on any device with the same ",(0,o.kt)("inlineCode",{parentName:"p"},"~/.ham.json")," config\nfile which was used to start the build first."),(0,o.kt)("p",null,"Track using the following command,"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"}," ham get ~@gh/enchilada-los19.1:gapps\n")),(0,o.kt)("p",null,"If the build was successful, you will have the output in the given Github Repo releases, something like this,"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Demo Releases",src:n(6473).Z,width:"1920",height:"948"})),(0,o.kt)("p",null,"After you see the build output, just to be safe run ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("inlineCode",{parentName:"strong"},"ham clean"))," to destroy all build servers if exists, this\nwill be done by ham automatically on the server itself, but just to be safe. If build has failed, when you run\nthe above get command, you will get a error saying there was a previous build which was ",(0,o.kt)("strong",{parentName:"p"},"successful")," or ",(0,o.kt)("strong",{parentName:"p"},"failed"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"}," ham clean # After you confirm the previous build was successful or failed.\n # or just run this if you want to stop every build asap to save cost.\n")),(0,o.kt)("h2",{id:"download-the-lineageos-build-from-github-releases"},"Download the LineageOS Build from Github Releases"),(0,o.kt)("p",null,"After you see the new release on your repository, Download all files to a directory and and open a Terminal in that\ndirectory."),(0,o.kt)("p",null,"Run the following commands, (",(0,o.kt)("strong",{parentName:"p"},"Make sure you have fastboot/adb installed in your system which you are going to use to\nflash your newly built ROM"),") "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"}," unzip lineage-19.1-*-recovery-enchilada.zip\n # If you are in Windows, use a Archive Extractor to extract \n # the contents of the recovery zip \n")),(0,o.kt)("p",null,"You will now have a ",(0,o.kt)("strong",{parentName:"p"},"pkmd.bin")," file which is your public key that is going to be flashed into your Phone as the\ncustom avb key, and a ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("inlineCode",{parentName:"strong"},"lineage-19.1-*-recovery-enchilada.img"))," file when the archive is extracted."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"You must now unlock your phone, make backups and also if you want, use fastboot to backup your persist and\nother partition too.")," See LineageOS docs for this ",(0,o.kt)("a",{parentName:"p",href:"https://wiki.lineageos.org/devices/enchilada/install#unlocking-the-bootloader"},"instruction"),"."),(0,o.kt)("p",null,"This is the usual you would do with flashing any ROM, except you should not patch or use any third party recovery,\nwe will only be using LineageOS recovery."),(0,o.kt)("admonition",{type:"danger"},(0,o.kt)("p",{parentName:"admonition"},"You should not use TWRP or any Recovery other than LineageOS Recovery which you have downloaded from Github Releases,\nsimilarly ",(0,o.kt)("strong",{parentName:"p"},"YOU SHOULD ONLY SIDELOAD THE ROM AND NOTHING ELSE"),". ",(0,o.kt)("strong",{parentName:"p"},"DO NOT SIDELOAD GAPPS OR MAGISK, THIS WILL\nBRICK YOUR PHONE"),".")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Enable Developer Mode in your Phone by tapping the Build Number 7 Times, then enable ADB.")," Now Connect your Phone\nto your PC and do the following,"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Enable OEM unlock in the Developer options under device Settings"),"."),(0,o.kt)("p",null,"Connect the device to your PC via USB. On the computer, open a command prompt (on Windows) or\nterminal (on Linux or macOS) window, and type:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"}," adb reboot bootloader\n")),(0,o.kt)("p",null,"Once the device is in fastboot mode, verify your PC finds it by typing:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"}," fastboot devices\n")),(0,o.kt)("p",null,"To verify if fastboot connection is ok."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Now let's flash the recovery we just extracted from the zip file,")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"}," fastboot flash boot lineage-19.1-*-recovery-enchilada.img \n")),(0,o.kt)("p",null,"Now reboot into recovery or enter the following command,"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"}," fastboot reboot recovery\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"You can also use the Volume Up/Down and navigate to Recovery and Press the Power Button.")," You can also go into\nrecovery by pressing ",(0,o.kt)("strong",{parentName:"p"},"Volume Down")," + ",(0,o.kt)("strong",{parentName:"p"},"Power"),". Please follow LineageOS docs for more information."),(0,o.kt)("p",null,"Now Tap ",(0,o.kt)("strong",{parentName:"p"},"Factory Reset"),", then Format Data / Factory Reset and continue with the formatting process. This will remove encryption and delete all files stored in the internal storage, as well as format your cache partition\n(if you have one). Return to the main menu."),(0,o.kt)("admonition",{type:"danger"},(0,o.kt)("p",{parentName:"admonition"},"You don't need to ",(0,o.kt)("strong",{parentName:"p"},"Format Data")," if you are already on a build from HAM and trying to update your ROM, this is\nonly for a fresh install and should be done only if the ROM itself is different.")),(0,o.kt)("p",null,"Sideload the LineageOS .zip package:"),(0,o.kt)("p",null,"On the device, select ",(0,o.kt)("strong",{parentName:"p"},"\u201cApply Update\u201d"),", then ",(0,o.kt)("strong",{parentName:"p"},"\u201cApply from ADB\u201d")," to begin sideload.\nOn the host machine, sideload the package using: ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("inlineCode",{parentName:"strong"},"adb sideload filename.zip."))),(0,o.kt)("p",null,"In our case, the following command,"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"adb sideload lineage-19.1-*-release-enchilada-signed.zip\n")),(0,o.kt)("p",null,"This is the file you downloaded from your releases."),(0,o.kt)("p",null,"Once you have installed everything successfully, click the back arrow in the top left of the screen,\nthen ",(0,o.kt)("strong",{parentName:"p"},"\u201cReboot system now\u201d"),"."),(0,o.kt)("h2",{id:"check-your-build-before-locking"},"Check your Build Before Locking"),(0,o.kt)("p",null,"After the reboot, you should have a working LineageOS 19.1 build with Google Apps embedded into it, check for bootloops\nand other errors, don't setup anything or login into your google account. Just checkout the OS for bugs and fatal\nerrors."),(0,o.kt)("p",null,"Once checking is done,\nEnable OEM unlocking and developer mode again, and reboot into fastboot again."),(0,o.kt)("h2",{id:"flashing-your-public-key-and-lock-bootloader"},"Flashing your Public Key and Lock Bootloader"),(0,o.kt)("p",null,"Run the following commands while you are in fastboot,"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"}," fastboot flash avb_custom_key pkmd.bin\n")),(0,o.kt)("p",null,"This ",(0,o.kt)("strong",{parentName:"p"},"pkmd.bin")," file is the file we extracted from the recovery zip we downloaded from our Github repo release which\nis built by HAM."),(0,o.kt)("p",null,"Now we will lock the bootloader, this will wipe all data on your Phone, "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"}," fastboot reboot bootloader\n fastboot oem lock\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Now you will be rebooted and hopefully with no errors, with a locked bootloader. Now Setup your Phone and recover\nyour Backups from Google.")),(0,o.kt)("h2",{id:"conclusion"},"Conclusion"),(0,o.kt)("p",null,"If you do end up with a bootloop after you lock your bootloader, please follow the unbrick guide for OnePlus 6 using\nthe MSM Tool. This will not happen in most cases, at least from build outputs of HAM. But there is no warranty of\nany sorts. "),(0,o.kt)("p",null,"\ud83c\udf89 You now have a Custom ROM running in your OP6 with ",(0,o.kt)("strong",{parentName:"p"},"Locked Bootloader")," \ud83c\udf89 "),(0,o.kt)("p",null,"Special thanks to ",(0,o.kt)("a",{parentName:"p",href:"https://forum.xda-developers.com/m/whitbygreg.1915770/"},"@WhitbyGreg")," who made the XDA forum post,\nand ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/Wunderment"},"Wunderment OS")," from where I copied a lot of scripts to make the ham recipe."))}d.isMDXComponent=!0},6473:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/releases-49b2040c3b7267db0c813764fc5204ad.png"}}]);